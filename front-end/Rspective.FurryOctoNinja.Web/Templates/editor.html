<div class="panel panel-default">
    <div class="panel-heading">
        <div class="form-group">
            <label for="survey_title">Title:</label>
            <input id="survey_title" class="form-control" type="text" ng-model="edit.survey.Title" required maxlength="200" placeholder="Title.." />
        </div>
        <div class="form-group">
            <label for="survey_description">Description:</label>
            <textarea id="survey_description" class="form-control" ng-model="edit.survey.Description" maxlength="1000" rows="5" placeholder="Description.."></textarea>
        </div>
    </div>
    <div class="panel-body">
        <div class="row">
            <div class="col-xs-12">
                <div ng-repeat="question in edit.survey.Questions" ng-show="edit.displayedQuestion === $index" ng-cloak>
                    <div ng-cloak>
                        <label for="question_{{$index}}">Question:</label>
                        <div class="input-group">
                            <div class="input-group-btn">
                                <button class="btn btn-default" ng-click="edit.survey.Questions.splice($index, 1);edit.updateDisplayedQuestion();">
                                    <i class="glyphicon glyphicon-remove"></i>
                                </button>
                            </div>
                            <input id="question_{{$index}}" class="form-control" ng-model="question.Text" required maxlength="200" placeholder="Question.." />
                        </div>
                        <label>Answers:</label>
                        <div class="input-group" ng-repeat="answer in question.Answers">
                            <div class="input-group-btn">
                                <button class="btn btn-default" ng-click="question.Answers.splice($index, 1)">
                                    <i class="glyphicon glyphicon-remove"></i>
                                </button>
                            </div>
                            <input class="form-control" ng-model="answer.Text" required maxlength="200" placeholder="Answer {{$index + 1}}.." />
                        </div>
                        <div class="input-group" ng-init="newAnswer = ''">
                            <div class="input-group-btn">
                                <button class="btn btn-default" ng-click="question.Answers.push({Text:newAnswer});newAnswer='';" ng-disabled="!newAnswer">
                                    <i class="glyphicon glyphicon-plus"></i>
                                </button>
                            </div>
                            <input class="form-control" ng-model="newAnswer" required maxlength="200" placeholder="Another answer.." />
                        </div>
                    </div>
                    <hr />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12 text-center">
                <ul class="pagination center-block" style="display:inline-block;">
                    <li ng-repeat="question in edit.survey.Questions">
                        <a ng-click="edit.displayedQuestion = $index">{{ $index + 1 }}</a>
                    </li>
                    <li>
                        <button class="btn btn-success" ng-click="edit.addQuestion();"
                                ng-disabled="((edit.survey.Questions || []).length === 0) ? false : !edit.survey.Questions[edit.survey.Questions.length - 1].Text">
                            Add new
                        </button>
                    </li>
                </ul>
                <hr />
                <button class="btn btn-success pull-right" ng-click="edit.submit()">Save</button>
                <hr />
                <button class="btn btn-success pull-right" ng-click="edit.notifyMobileDevices()" ng-disabled="edit.notifyDisabled">Notify</button>
            </div>
        </div>
    </div>
</div>
